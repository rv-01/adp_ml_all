graph TB
    %% User Interface Layer
    UI[ğŸŒ Flask Web Interface<br/>Dashboard, Upload, Review]
    
    %% API Layer
    UI --> API[ğŸ”Œ REST API Layer<br/>app.py routes]
    
    %% Core Processing Components
    API --> DL[ğŸ“¥ Data Loader<br/>src/data_ingestion/loaders.py]
    API --> ED[ğŸ§  Ensemble Detector<br/>src/advanced_ml/ensemble_detector.py]
    API --> EE[ğŸ’¡ Explainability Engine<br/>src/explainability/explainer.py]
    API --> AS[ğŸ“Š Audit Store<br/>src/audit/store.py]
    
    %% Data Loader Details
    DL --> DL1[ğŸ“„ File Processing<br/>CSV, Parquet support]
    DL --> DL2[ğŸ”§ Preprocessing<br/>Type detection, standardization]
    DL --> DL3[ğŸ·ï¸ Metadata Addition<br/>Row IDs, timestamps]
    
    %% Ensemble Detector Components
    ED --> FE[âš™ï¸ Feature Engineering<br/>Multi-modal preparation]
    ED --> AA[ğŸ¤– Algorithm Array<br/>7 Detection Algorithms]
    ED --> VL[ğŸ—³ï¸ Voting Logic<br/>Weighted consensus]
    ED --> AL[ğŸ§  Adaptive Learning<br/>Weight adjustment]
    
    %% Individual Algorithms
    AA --> A1[ğŸŒ³ Isolation Forest<br/>sklearn.ensemble]
    AA --> A2[ğŸ” Local Outlier Factor<br/>sklearn.neighbors]
    AA --> A3[ğŸ¯ One-Class SVM<br/>sklearn.svm]
    AA --> A4[ğŸ§  Deep Autoencoder<br/>TensorFlow/Keras]
    AA --> A5[ğŸ“Š Statistical Tests<br/>scipy.stats]
    AA --> A6[ğŸ”˜ DBSCAN Clustering<br/>sklearn.cluster]
    AA --> A7[â° Temporal Analysis<br/>Custom implementation]
    
    %% Feature Engineering Paths
    FE --> FE1[ğŸ“Š Numerical Features<br/>Scaling, transformations]
    FE --> FE2[ğŸ“… Temporal Features<br/>Time extraction]
    FE --> FE3[ğŸ·ï¸ Categorical Features<br/>Encoding strategies]
    FE --> FE4[ğŸ“ Text Features<br/>Length, complexity metrics]
    
    %% Algorithm-Specific Processing
    FE1 --> A1
    FE1 --> A2
    FE1 --> A3
    FE2 --> A7
    FE3 --> A5
    FE4 --> A4
    
    %% Voting and Decision
    A1 --> VL
    A2 --> VL
    A3 --> VL
    A4 --> VL
    A5 --> VL
    A6 --> VL
    A7 --> VL
    
    VL --> DM[ğŸ¯ Decision Making<br/>Consensus thresholds]
    DM --> CF[ğŸ“‹ Confidence Levels<br/>High, Medium, Low]
    
    %% Explainability Processing
    CF --> EE
    EE --> EE1[ğŸ” Root Cause Analysis<br/>Feature contributions]
    EE --> EE2[ğŸ“ Natural Language<br/>Human-readable explanations]
    EE --> EE3[ğŸ’¡ Action Recommendations<br/>Suggested next steps]
    
    %% Human Feedback Loop
    EE1 --> HF[ğŸ‘¤ Human Feedback<br/>Confirm/Dismiss/Escalate]
    EE2 --> HF
    EE3 --> HF
    
    HF --> AL
    AL --> PU[ğŸ“ˆ Performance Update<br/>Algorithm accuracy tracking]
    AL --> WA[âš–ï¸ Weight Adjustment<br/>Exponential moving average]
    AL --> TA[ğŸ›ï¸ Threshold Adaptation<br/>Precision/Recall balance]
    
    PU --> AA
    WA --> VL
    TA --> DM
    
    %% Audit and Storage
    HF --> AS
    CF --> AS  
    AL --> AS
    
    AS --> DB[(ğŸ—„ï¸ SQLite Database<br/>Quality checks, feedback, sessions)]
    AS --> ST[ğŸ“Š Statistics Calculation<br/>Performance metrics]
    AS --> TR[ğŸ“ˆ Trend Analysis<br/>Historical patterns]
    
    %% Dashboard Data Flow
    ST --> UI
    TR --> UI
    AL --> UI
    
    %% Configuration Management
    CONFIG[âš™ï¸ Configuration<br/>config.py] --> ED
    CONFIG --> API
    
    CONFIG --> CW[âš–ï¸ Initial Weights<br/>Algorithm starting weights]
    CONFIG --> CT[ğŸ¯ Thresholds<br/>Confidence levels]
    CONFIG --> CL[ğŸ§  Learning Params<br/>Rates, minimums]
    
    CW --> VL
    CT --> DM
    CL --> AL
    
    %% External Dependencies
    EXT[ğŸ“¦ External Libraries]
    EXT --> EXT1[ğŸ”¬ scikit-learn<br/>ML algorithms]
    EXT --> EXT2[ğŸ§  TensorFlow<br/>Deep learning]
    EXT --> EXT3[ğŸ“Š scipy<br/>Statistical tests]
    EXT --> EXT4[ğŸ¼ pandas<br/>Data manipulation]
    EXT --> EXT5[ğŸŒ Flask<br/>Web framework]
    
    EXT1 --> A1
    EXT1 --> A2
    EXT1 --> A3
    EXT1 --> A6
    EXT2 --> A4
    EXT3 --> A5
    EXT4 --> DL
    EXT4 --> FE
    EXT5 --> API
    
    %% Data Flow Indicators
    DL -.->|Processed Data| ED
    ED -.->|Anomaly Results| EE
    EE -.->|Explanations| AS
    AS -.->|Stored Results| UI
    
    %% Drift Detection (Advanced)
    DD[ğŸ“¡ Drift Detector<br/>Statistical monitoring]
    DL --> DD
    DD --> DD1[ğŸ“Š PSI Calculation<br/>Population Stability Index]
    DD --> DD2[ğŸ“ˆ KS Tests<br/>Distribution comparison]
    DD --> DD3[âš ï¸ Drift Alerts<br/>Threshold violations]
    
    DD3 --> AL
    DD3 --> UI
    
    %% Model Persistence
    AL --> MP[ğŸ’¾ Model Persistence<br/>model_cache/]
    MP --> MC[(ğŸ“ Model Cache<br/>Serialized algorithms)]
    MC --> AA
    
    %% Styling
    classDef uiLayer fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef coreLogic fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef algorithms fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef storage fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef config fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef external fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    
    class UI,API uiLayer
    class DL,ED,EE,AS,FE,VL,AL,DM coreLogic
    class AA,A1,A2,A3,A4,A5,A6,A7 algorithms
    class DB,MC,AS,ST,TR storage
    class CONFIG,CW,CT,CL config
    class EXT,EXT1,EXT2,EXT3,EXT4,EXT5 external